# Telegram Bot для поддержки пользователей

**Описание**
Этот бот представляет собой комплексное решение для организации службы поддержки через Telegram. Он позволяет пользователям отправлять сообщения напрямую боту, которые затем пересылаются в специальную группу для администраторов. Администраторы могут отвечать на сообщения пользователей, управлять доступом (блокировать и разблокировать), просматривать статистику и получать информацию о пользователях прямо из чата.

Бот построен на библиотеке `aiogram` и использует JSON-файлы для хранения данных, что делает его простым в настройке и развертывании.

---

## Минимальные требования

* Python 3.8+
* Библиотека `aiogram`
* Права администратора для бота в групповом чате администраторов.

---

## Установка

1.  Склонируйте репозиторий:
    ```bash
    git clone https://github.com/noloverme/telegram-support-bot.git
    cd telegram-support-bot
    ```

2.  Установите зависимости:
    ```bash
    pip install aiogram
    ```

3.  (Опционально) Создайте и настройте файл `messages.json` для кастомизации ответов бота. Если файл пуст или отсутствует, будут использованы значения по умолчанию.

---

## Как настроить

В начале файла `main.py` необходимо указать две переменные:

*   `BOT_TOKEN`: токен вашего бота, полученный от [@BotFather](https://t.me/BotFather).
*   `ADMIN_CHAT_ID`: ID группы, где бот будет взаимодействовать с администраторами.

---

## Возможности

### Команды для пользователей
| Команда | Описание |
| --- | --- |
| `/start` | Регистрация в боте, приветственное сообщение. |
| `/help` | Краткая информация о предназначении бота. |

### Команды для администраторов
Администраторы могут использовать команды, отвечая на пересланное сообщение пользователя, либо указывая `user_id` вручную.

| Команда | Описание |
| --- | --- |
| `/msg <user_id> <текст>` | Отправка личного сообщения пользователю от имени бота. |
| `/who [user_id]` | Получение информации о пользователе (ID, username, дата первого запуска). |
| `/stats` | Статистика по сообщениям: всего, за последние 30 дней, за последние 7 дней. |
| `/ban [user_id] [срок] [причина]` | Блокировка пользователя. **Срок** указывается в формате `число`+`единица` (например, `7d`, `1w`, `2h`). Единицы: `m`(минуты), `h`(часы), `d`(дни), `w`(недели), `y`(годы). Без срока — бан навсегда. |
| `/unban [user_id]` | Разблокировка пользователя. |
| `/banlist` | Просмотр списка заблокированных пользователей с постраничной навигацией. |

Бот автоматически фильтрует старые данные (старше 30 дней) и ведёт лог действий администраторов в файле `meta/admin_log.txt`.

---

## Сценарии использования

1.  **Обращение пользователя**: Пользователь пишет боту. Бот пересылает его сообщение в чат администраторов.
2.  **Ответ администратора**: Администратор отвечает на пересланное сообщение. Бот отправляет этот ответ пользователю.
3.  **Бан пользователя**: Администратор командой `/ban` (в ответ на сообщение или с указанием ID) блокирует пользователя. Пользователь получает уведомление о блокировке.
4.  **Просмотр информации**: Администратор командой `/who` получает краткую сводку о пользователе.
5.  **Просмотр заблокированных**: Администратор использует `/banlist` для навигации по списку заблокированных пользователей.

---

## Структура проекта

```
/ (корень проекта)
│ main.py                – основной код бота
│ messages.json          – пользовательские тексты и шаблоны
└─ meta/
   ├─ users_data.json     – данные о пользователях (ID, username, статистика)
   ├─ messages_mapping.json – сопоставление сообщений для ответов
   ├─ reply_mapping.json  – (не используется в текущей логике, зарезервирован)
   └─ admin_log.txt       – лог действий администраторов
```
