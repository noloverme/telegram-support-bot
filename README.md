# Telegram Bot для поддержки пользователей

**Описание**
Бот реализован с виджетом администрирования через группу Telegram — пользователи могут писать напрямую, а админы отвечать через интерфейс. Поддерживаются команды `/start`, `/help`, блокировка пользователей, статистика и навигация по списку заблокированных через inline-кнопки.

---

## Минимальные требования

* Python 3.8+
* Библиотека `aiogram`
* Права администратора бота в выбранном чате (для обработки команд `/msg`, `/ban` и т.п.)

---

## Установка

1. Склонируйте репозиторий и перейдите в папку проекта:

   ```bash
   git clone https://github.com/noloverme/telegram-support-bot.git
   cd telegram-support-bot
   ```

2. Установите зависимости:

   ```bash
   pip install aiogram
   ```

3. Создайте файл `messages.json` для кастомных текстов (предупреждения, шаблоны и т.п.).

---

## Как настроить

В начале файла укажите:

* `BOT_TOKEN`: токен бота от [BotFather](https://t.me/BotFather)
* `ADMIN_CHAT_ID`: ID чата/группы, где бот будет отправлять сообщения администраторам и принимать их команды.

---

## Возможности

| Функция                           | Описание                                                        |
| --------------------------------- | --------------------------------------------------------------- |
| `/start`                          | Приветствие нового пользователя и первый запуск бота            |
| `/help`                           | Информация о том, как работает бот                              |
| `/msg <user_id> <текст>`          | Отправка сообщения пользователю от имени администратора         |
| `/who [user_id]`                  | Получение информации о пользователе: дата первого запуска и имя |
| `/stats`                          | Общая статистика сообщений (всего, за неделю, за месяц)         |
| `/ban [user_id] [срок] [причина]` | Блокировка пользователя на определённый срок или навсегда       |
| `/unban [user_id]`                | Разблокировка пользователя                                      |
| `/banlist`                        | Просмотр списка заблокированных с постраничной навигацией       |

Бот автоматически фильтрует старые сообщения (старше 30 дней) и ведёт лог действий админов в `meta/admin_log.txt`.

---

## Сценарии использования

1. User отправил сообщение — бот переслал его админу.
2. Admin ответил — бот переслал ответ обратно.
3. Admin может забанить пользователя, добавить причину и срок.
4. User пытается написать — бот проверит ban и при необходимости ответит о блокировке или снятии блокировки.
5. `/banlist` позволяет пролистывать бан-лист через inline-кнопки.

---

## Структура проекта

```
/ (корень проекта)
│ bot.py                 – основной код бота
│ messages.json          – пользовательские тексты и шаблоны
├─ meta/
│  ├ users_data.json     – данные о пользователях (запуски, сообщения)
│  ├ messages_mapping.json
│  ├ reply_mapping.json
│  └ admin_log.txt       – лог действий админов
```
